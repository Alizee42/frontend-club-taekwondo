<div class="profile-page">
    <div class="profile-card">
      <div class="profile-header">
        <img src="https://via.placeholder.com/150" alt="Photo de profil" class="profile-picture" />
        <h2>{{ user.nom || 'Nom' }} {{ user.prenom || 'Prénom' }}</h2>
        <p class="profile-role">{{ user.role || 'Rôle' }}</p>
      </div>
  
      <form (ngSubmit)="saveProfile()" class="profile-form">
        <!-- Nom -->
        <div class="form-group">
          <label for="nom">Nom :</label>
          <div class="form-field">
            <span *ngIf="!editMode.nom">{{ user.nom }}</span>
            <input
              *ngIf="editMode.nom"
              type="text"
              id="nom"
              [(ngModel)]="user.nom"
              name="nom"
              required
              class="form-control"
            />
            <button type="button" class="btn-edit" (click)="toggleEdit('nom')">
              <i class="fas fa-pen"></i>
            </button>
          </div>
        </div>
  
        <!-- Prénom -->
        <div class="form-group">
          <label for="prenom">Prénom :</label>
          <div class="form-field">
            <span *ngIf="!editMode.prenom">{{ user.prenom }}</span>
            <input
              *ngIf="editMode.prenom"
              type="text"
              id="prenom"
              [(ngModel)]="user.prenom"
              name="prenom"
              required
              class="form-control"
            />
            <button type="button" class="btn-edit" (click)="toggleEdit('prenom')">
              <i class="fas fa-pen"></i>
            </button>
          </div>
        </div>
  
        <!-- Email -->
        <div class="form-group">
          <label for="email">Email :</label>
          <div class="form-field">
            <span *ngIf="!editMode.email">{{ user.email }}</span>
            <input
              *ngIf="editMode.email"
              type="email"
              id="email"
              [(ngModel)]="user.email"
              name="email"
              required
              class="form-control"
            />
            <button type="button" class="btn-edit" (click)="toggleEdit('email')">
              <i class="fas fa-pen"></i>
            </button>
          </div>
        </div>
  
        <!-- Téléphone -->
        <div class="form-group">
          <label for="telephone">Téléphone :</label>
          <div class="form-field">
            <span *ngIf="!editMode.telephone">{{ user.telephone }}</span>
            <input
              *ngIf="editMode.telephone"
              type="text"
              id="telephone"
              [(ngModel)]="user.telephone"
              name="telephone"
              class="form-control"
            />
            <button type="button" class="btn-edit" (click)="toggleEdit('telephone')">
              <i class="fas fa-pen"></i>
            </button>
          </div>
        </div>
  
        <!-- Boutons -->
        <div class="form-actions">
          <button type="submit" class="btn-save">Sauvegarder</button>
          <button type="button" class="btn-password" (click)="openPasswordModal()">Modifier le mot de passe</button>
        </div>
      </form>
    </div>
  
    <!-- Modale pour la modification du mot de passe -->
    <div class="modal" *ngIf="showPasswordModal">
      <div class="modal-content">
        <h2>Modifier le mot de passe</h2>
        <form (ngSubmit)="updatePassword()">
          <div class="form-group">
            <label for="newPassword">Nouveau mot de passe :</label>
            <input
              type="password"
              id="newPassword"
              [(ngModel)]="passwordData.newPassword"
              name="newPassword"
              required
              class="form-control"
            />
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirmer le mot de passe :</label>
            <input
              type="password"
              id="confirmPassword"
              [(ngModel)]="passwordData.confirmPassword"
              name="confirmPassword"
              required
              class="form-control"
            />
          </div>
          <p *ngIf="passwordError" class="error">{{ passwordError }}</p>
          <div class="form-actions">
            <button type="submit" class="btn-save">Enregistrer</button>
            <button type="button" class="btn-cancel" (click)="closePasswordModal()">Annuler</button>
          </div>
        </form>
      </div>
    </div>
  </div>